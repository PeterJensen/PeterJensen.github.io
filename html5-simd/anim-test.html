<!doctype html>
<html>
<head>
  <link rel="stylesheet" href="css/reveal.min.css">
  <link rel="stylesheet" href="css/theme/simple.css" id="theme">

  <!-- For syntax highlighting -->
  <link rel="stylesheet" href="lib/css/zenburn.css">

  <!-- Custom styling -->
  <link rel="stylesheet" href="html5-simd.css">
  <link rel="stylesheet" href="fbird.css">

</head>
<body>
<div class="reveal">
<div class="slides">

<section>
<h2>Test</h2>
</section>

<section id="fbird1">
  <h2>Start</h2>
  <iframe src="fbird.html?width=500px&height=500px&startY=10" style="width:500px;height:500px"></iframe>
  <h2>End</h2>
</section>

</div>
</div>

<script src="jquery-2.1.0.min.js" type="text/javascript"></script>
<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>
<script>

function revealSetup() {

  var fbird1Window = $("#fbird1 iframe")[0].contentWindow;
  
  function slideChanged(event) {
    if (event.currentSlide.id === "fbird1") {
      fbird1Window.fbird.start();  
    }
    if (typeof event.previousSlide !== "undefined" && event.previousSlide.id === "fbird1") {
      fbird1Window.fbird.stop();
    }
  }

  // Full list of configuration options available here:
  // https://github.com/hakimel/reveal.js#configuration

  Reveal.initialize({
    controls: false,
    progress: false,
    history: true,
    center: true,
    width: 1400,
    height: 1000,
    minScale: 1.0,
    maxScale: 1.0,
    margin: 0.2,

    theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
    transition: Reveal.getQueryHash().transition || 'fade', // default/cube/page/concave/zoom/linear/fade/none

    // Parallax scrolling
    // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
    // parallaxBackgroundSize: '2100px 900px',

    // Optional libraries used to extend on reveal.js
    dependencies: [
      { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
      { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
      { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
      { src: 'plugin/math/math.js', async: true, condition: function() { return true; } },
      { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
    ],
    
    math: {config: "TeX-AMS-MML_HTMLorMML"}

  });
  
  Reveal.addEventListener('slidechanged', slideChanged);
}

   function animateTest(max) {
    var $testBird  = $("#testBird");
    var testBird   = $testBird[0];
    var currentTop = 0;
    var inc        = 10;

    function move() {
//      setTimeout(move, 32);
      requestAnimationFrame(move);
      currentTop += inc;
      if (currentTop < 0 || currentTop > max) {
        inc = -inc;
        currentTop += inc;
      }
      testBird.style.top = currentTop + "px";
    }
    
    move();
  }

$(function() {
  revealSetup();
//  animateTest(500);        
});
</script>
</body>
</html>
